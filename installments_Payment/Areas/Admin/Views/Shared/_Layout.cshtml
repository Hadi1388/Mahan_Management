@using installments_Payment.Core.Extensions
<!DOCTYPE html>
<html lang="fa" dir="rtl">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>پنل ادمین - @ViewData["Title"]</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet" />
    <link href="~/lib/mddatatimepicker/mds.bs.datetimepicker.style.css" rel="stylesheet" />
    <link rel="icon" type="image/x-icon" href="/favicon.ico">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'light-green': '#e0f7fa',
                        'green-primary': '#26a69a',
                        'green-dark': '#00796b',
                        'white-bg': '#ffffff',
                        'gray-border': '#c8e6c9'
                    }
                }
            }
        };
    </script>

    <style>
        @@import url('https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;600&display=swap');

        * {
            font-family: 'Vazirmatn', sans-serif;
        }

        .sidebar-item:hover {
            background-color: #e0f2f1;
            border-right: 3px solid #26a69a;
            color: #00796b !important;
        }

        .gradient-bg {
            background: linear-gradient(135deg, #e0f7fa 0%, #e8f5e9 100%);
        }

        .btn-gradient-green {
            background: linear-gradient(90deg, #43a047 0%, #66bb6a 50%, #81c784 100%);
            color: white;
            padding: 0.6rem 1.2rem;
            border-radius: 9999px;
            font-weight: 600;
            border: none;
            cursor: pointer;
            transition: background 0.3s ease, box-shadow 0.3s ease;
            box-shadow: 0 4px 12px rgba(102, 187, 106, 0.4);
            display: inline-block;
            user-select: none;
            text-align: center;
        }

            .btn-gradient-green:hover {
                background: linear-gradient(90deg, #388e3c 0%, #4caf50 50%, #66bb6a 100%);
                box-shadow: 0 6px 18px rgba(76, 175, 80, 0.6);
                opacity: 0.95;
            }

        .btn-gradient-white {
            background: linear-gradient(90deg, #ffffff 0%, #f5f5f5 50%, #eeeeee 100%);
            color: #333333;
            padding: 0.6rem 1.2rem;
            border-radius: 9999px;
            font-weight: 600;
            border: none;
            cursor: pointer;
            transition: background 0.3s ease, box-shadow 0.3s ease;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            display: inline-block;
            user-select: none;
            text-align: center;
        }

            .btn-gradient-white:hover {
                background: linear-gradient(90deg, #f0f0f0 0%, #e0e0e0 50%, #dcdcdc 100%);
                box-shadow: 0 6px 18px rgba(0, 0, 0, 0.25);
                opacity: 0.95;
            }

        .btn-gradient-gray {
            background: linear-gradient(to right, #9e9e9e, #616161);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 9999px;
            font-weight: 500;
            transition: opacity 0.3s ease;
            cursor: pointer;
        }

            .btn-gradient-gray:hover {
                opacity: 0.9;
            }

        .btn-gradient-purple {
            background: linear-gradient(90deg, #8e24aa 0%, #9c27b0 50%, #ba68c8 100%);
            color: white;
            padding: 0.6rem 1.2rem;
            border-radius: 9999px;
            font-weight: 600;
            border: none;
            cursor: pointer;
            transition: background 0.3s ease, box-shadow 0.3s ease;
            box-shadow: 0 4px 12px rgba(156, 39, 176, 0.4);
            display: inline-block;
            user-select: none;
            text-align: center;
        }

            .btn-gradient-purple:hover {
                background: linear-gradient(90deg, #6a1b9a 0%, #7b1fa2 50%, #9c27b0 100%);
                box-shadow: 0 6px 18px rgba(156, 39, 176, 0.6);
                opacity: 0.95;
            }


        .btn-gradient-yellow {
            background: linear-gradient(90deg, #f2cc68 0%, #f8b500 100%);
            color: #fff;
            padding: 0.5rem 1.2rem;
            border-radius: 9999px; /* گرد و نرم */
            font-weight: 500;
            border: none;
            cursor: pointer;
            transition: opacity 0.3s ease;
        }

            .btn-gradient-yellow:hover {
                opacity: 0.85;
            }

        .btn-gradient-blue {
            background: linear-gradient(to right, #2196f3, #0d47a1); /* آبی روشن به آبی تیره */
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 9999px;
            font-weight: 500;
            cursor: pointer;
            transition: opacity 0.3s ease, transform 0.2s ease;
        }

            .btn-gradient-blue:hover {
                opacity: 0.9;
                transform: scale(1.02);
            }

        .btn-gradient-red {
            background: linear-gradient(to right, #f44336, #b71c1c); /* قرمز روشن به قرمز تیره */
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 9999px;
            font-weight: 500;
            cursor: pointer;
            transition: opacity 0.3s ease, transform 0.2s ease;
        }

            .btn-gradient-red:hover {
                opacity: 0.9;
                transform: scale(1.02);
            }
    </style>
</head>

<body class="gradient-bg min-h-screen" dir="rtl">

    <!-- دکمه موبایل -->
    <button class="fixed top-4 right-4 z-50 lg:hidden bg-green-primary text-white p-3 rounded-full shadow-lg"
            onclick="toggleMobileSidebar()">
        <i class="fas fa-bars"></i>
    </button>

    <!-- بکگراند موبایل -->
    <div class="fixed inset-0 bg-black bg-opacity-40 z-40 lg:hidden hidden" id="sidebar-overlay"
         onclick="toggleMobileSidebar()"></div>

    <!-- سایدبار -->
    <div id="sidebar"
         class="fixed right-0 top-0 h-full w-64 bg-white z-50 shadow-lg transform translate-x-full lg:translate-x-0 transition-transform duration-300 border-l border-gray-border">
        <div class="p-4 border-b border-gray-border flex items-center space-x-3 space-x-reverse">
            <div class="w-10 h-10 bg-green-primary rounded-full flex items-center justify-center text-white font-bold">
                <i class="fas fa-crown"></i>
            </div>
            <div>
                <h2 class="text-green-dark font-bold text-lg">پنل ادمین</h2>
                @*                 <p class="text-gray-500 text-sm">مدیریت سیستم</p>
 *@            </div>
        </div>
        <nav class="mt-6 overflow-y-auto h-[calc(100vh-160px)] text-green-dark">
            <a asp-area="Admin" asp-controller="Dashboard" asp-action="Index">
                <div class="sidebar-item px-6 py-3 text-gray-700 hover:font-semibold cursor-pointer">
                    <i class="fas fa-tachometer-alt me-2"></i> داشبورد
                </div>
            </a>

            <a asp-area="Admin" asp-controller="Patients" asp-action="Index">
                <div class="sidebar-item px-6 py-3 text-gray-700 hover:font-semibold cursor-pointer">
                    <i class="fas fa-child me-2"></i> بیماران
                </div>
            </a>

            <a asp-area="Admin" asp-controller="Assistants" asp-action="Index">
                <div class="sidebar-item px-6 py-3 text-gray-700 hover:font-semibold cursor-pointer">
                    <i class="fas fa-users me-2"></i> دستیاران
                </div>
            </a>

            <div class="sidebar-item px-6 py-3 text-gray-700 hover:font-semibold cursor-pointer" id="requestsMenu">
                <div class="flex justify-between items-center">
                    <div><i class="fas fa-list me-2"></i> درخواست ها</div>
                    <i class="fas fa-chevron-down text-sm transition-transform duration-200" id="requestsArrow"></i>
                </div>
                <!-- آیتم‌های تنظیمات -->
                <div class="mt-2 flex flex-col gap-1 hidden" id="requestsItems">
                    <a asp-area="Admin" asp-controller="Requests" asp-action="Index">
                        <div class="sidebar-item px-6 py-3 text-gray-700 hover:font-semibold cursor-pointer">
                            <i class="fas fa-list me-2"></i> در انتظار
                        </div>
                    </a>

                    <a asp-area="Admin" asp-controller="Requests" asp-action="ApprovedRequests">
                        <div class="sidebar-item px-6 py-3 text-gray-700 hover:font-semibold cursor-pointer">
                            <i class="fas fa-list me-2"></i> تایید شده
                        </div>
                    </a>
                </div>
            </div>


            <a asp-area="Admin" asp-controller="Commodities" asp-action="Index">
                <div class="sidebar-item px-6 py-3 text-gray-700 hover:font-semibold cursor-pointer">
                    <i class="fas fa-box me-2"></i> کالا ها
                </div>
            </a>

            <a asp-area="Admin" asp-controller="Orders" asp-action="Index">
                <div class="sidebar-item px-6 py-3 text-gray-700 hover:font-semibold cursor-pointer">
                    <i class="fas fa-shopping-cart me-2"></i> سفارشات
                </div>
            </a>

            <!-- منوی تنظیمات با دراپ‌داون -->
            <div class="sidebar-item px-6 py-3 text-gray-700 hover:font-semibold cursor-pointer" id="settingsMenu">
                <div class="flex justify-between items-center">
                    <div><i class="fas fa-cog me-2"></i> تنظیمات</div>
                    <i class="fas fa-chevron-down text-sm transition-transform duration-200" id="settingsArrow"></i>
                </div>
                <!-- آیتم‌های تنظیمات -->
                <div class="mt-2 flex flex-col gap-1 hidden" id="settingsItems">
                    <a asp-area="Admin" asp-controller="Treatments" asp-action="Index" class="px-8 py-2 text-gray-700 hover:bg-green-primary/10 rounded">نام درمان</a>
                    <a asp-area="Admin" asp-controller="TreatmentTypes" asp-action="Index" class="px-8 py-2 text-gray-700 hover:bg-green-primary/10 rounded">نوع درمان</a>
                    <a asp-area="Admin" asp-controller="InstallmentPenalty" asp-action="Index" class="px-8 py-2 text-gray-700 hover:bg-green-primary/10 rounded">جریمه دیرکرد</a>
                </div>
            </div>

            <a class="fixed-bottom text-center">
                <hr />
                <div class="sidebar-item px-6 py-3 text-gray-700 hover:font-semibold cursor-pointer">
                    امروز:
                    @DateTime.Now.ToPersianDate()
                </div>
            </a>
        </nav>
    </div>

    <!-- محتوای اصلی -->
    <div class="lg:mr-64 min-h-screen">
        <header class="bg-white/80 backdrop-blur-sm border-b border-gray-border p-4 pt-16 lg:pt-6 lg:p-6">
            <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4">
                <div>
                    <h1 class="text-green-dark font-bold text-2xl">@ViewData["Title"]</h1>
                </div>
                <div class="flex items-center gap-4">
@*                     <button class="bg-green-primary/20 p-2 rounded-full text-green-dark hover:bg-green-primary/30 transition">
                        <i class="fas fa-bell"></i>
                    </button> *@
                    <button class="bg-gradient-to-r from-green-primary to-green-dark text-white px-4 py-2 rounded-full font-medium hover:opacity-90 transition">
                        پروفایل
                    </button>
                </div>
            </div>
        </header>

        <main class="p-4 lg:p-6">
            <!-- محتوای صفحه -->
            @RenderBody()
        </main>
    </div>

    <script>
        const settingsMenu = document.getElementById("settingsMenu");
        const settingsItems = document.getElementById("settingsItems");
        const settingsArrow = document.getElementById("settingsArrow");

        settingsMenu.addEventListener("click", () => {
            settingsItems.classList.toggle("hidden");
            settingsArrow.classList.toggle("rotate-180"); // چرخش فلش
        });

        // const patientsMenu = document.getElementById("patientsMenu");
        // const patientsItems = document.getElementById("patientsItems");
        // const patientsArrow = document.getElementById("patientsArrow");

        // patientsMenu.addEventListener("click", () => {
        //     patientsItems.classList.toggle("hidden");
        //     patientsArrow.classList.toggle("rotate-180"); // چرخش فلش
        // });

        const requestsMenu = document.getElementById("requestsMenu");
        const requestsItems = document.getElementById("requestsItems");
        const requestsArrow = document.getElementById("requestsArrow");

        requestsMenu.addEventListener("click", () => {
            requestsItems.classList.toggle("hidden");
            requestsArrow.classList.toggle("rotate-180"); // چرخش فلش
        });

        function toggleMobileSidebar() {
            const sidebar = document.getElementById("sidebar");
            const overlay = document.getElementById("sidebar-overlay");

            sidebar.classList.toggle("translate-x-full");
            overlay.classList.toggle("hidden");
        }
    </script>
    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/jquery-validation/dist/jquery.validate.min.js"></script>
    <script src="~/lib/jquery-validation-unobtrusive/dist/jquery.validate.unobtrusive.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/lib/mddatatimepicker/mds.bs.datetimepicker.js"></script>
    @RenderSection("Scripts", required: false)
</body>

</html>
